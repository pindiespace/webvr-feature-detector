{"version":3,"sources":["node_modules\\browser-pack\\_prelude.js","src\\bundle.js"],"names":["window","load","batches","callback","progressFn","failFn","runScriptBatch","batchScript","i","length","scriptLength","scr","clear_","poly","self","results","name","s","document","createElement","type","charset","async","src","path","undefined","onreadystatechange","test","this","readyState","firstState","children","err_","e","srcElement","baseURI","onload","onerror","target","nodeType","head","insertBefore","firstChild","batchCount","getElementsByTagName","documentElement","batchLength","scriptCount","gScriptCount","scriptsToLoad","msg","removeChild","parseInt","len","j","len2","reDetect","retests","tests","detect","deviceorientation","eventSupport_","devicemotion","cs","ctx","names","ua","navigator","userAgent","toLowerCase","XMLHttpRequest","overrideMimeType","prototype","con","log","error","val","console","getComputedStyle","styles","pre","Array","slice","call","join","match","js","css","a","innerHTML","res","CanvasRenderingContext2D","getContext","getParameter","vers","VERSION","Worker","File","FileReader","FileList","Blob","mod","localStorage","setItem","removeItem","querySelectorAll","CustomEvent","elem","eventName","isSupported","setAttribute","removeAttribute","Object","DocumentTouch","getGamepads","indexOf","opera","compatMode","atob","querySelector","addEventListener","Promise","x","substring","verOffset","devicePixelRatio","alert","XPCNativeWrapper","URL","globalStorage","postMessage","mozRequestAnimationFrame","createdElement","style","MozAnimation","WeakMap","textOverflow","insertAdjacentHTML","doNotTrack","mozIndexedDB","mozFullScreenEnabled","mozCancelAnimationFrame","Reflect","MozTextAlignLast","MozOpacity","borderImage","animation","iterator","Math","hypot","chrome","onhashchange","performance","createObjectURL","matchMedia","AudioContext","webkitAudioContext","crypto","Intl","WebVRFeatureDetector"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n * Device and feature detector for WebVR projects needing to provide\n * graceful decay for old and obsolete browsers.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n(function (window) {\n  var self = this; // Scope.\n  var cs, ctx, tests = [], retests = {}; self.results = {};\n\n  var names = ['3d', 'webgl', 'experimental-webgl', 'experimental-webgl2', 'moz-webgl'];\n  var ua = navigator.userAgent.toLowerCase();\n\n  /*\n   * Patches and fixes.\n   *\n   * This hack lets IE10 render to canvas with newer versions of\n   * of THREE.js which use overrideMimeType in the Object loader.\n   */\n  if(window.XMLHttpRequest) {\n    if (!XMLHttpRequest.overrideMimeType) {\n      XMLHttpRequest.prototype.overrideMimeType = function (type) {};\n    }\n  }\n \n  /* \n   * Remove errors for console.log or console.error on ancient browsers.\n   * Add 'alert' if debugging is desired.\n   */\n  (function (con) {\n    if (!con.log) con.log = function () {};\n    if (!con.error) con.error = function (val) {}; // debug with alert(val)\n  })(window.console = window.console || {});\n\n  /*\n   * Feature detection.\n   *\n   * Our feature detectors are wrapped in named functions so they\n   * can be re-tested after loading polyfills.\n   *\n   * Client vendor prefixes.\n   * @link https://davidwalsh.name/vendor-prefix\n   */\n  tests['vendorPrefix'] = function () {\n    // Get the vendor prefix for the client.\n    if (!window.getComputedStyle) {\n      return {\n        js: '',\n        css: ''\n      };\n    } else {\n    var styles = window.getComputedStyle(document.documentElement, ''),\n    pre = (Array.prototype.slice\n        .call(styles)\n        .join('')\n        .match(/-(moz|webkit|ms|o|xv)-/) || ['',''])[1]; // Default to nothing.\n      return {\n          js: pre,\n          css: '-' + pre + '-',\n        };\n    }\n  };\n\n  /*\n   * Test for document.createElement presence,\n   * missing in IE < 7, FF < 2.\n   */\n  tests['createElement'] = function () {\n    return !!(document.createElement);\n  };\n\n  /*\n   * Test for basic HTML5 tag support.\n   * Adapted from HTML5Shiv\n   * @link https://github.com/aFarkas/html5shiv/blob/master/dist/html5shiv.js\n   */\n  tests['html5'] = function () {\n    if(tests['createElement']()) {\n      var a = document.createElement('a');\n      a.innerHTML = '<xyz></xyz>';\n      //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles\n      var res = ('hidden' in a);\n      a = a.innerHTML = null;\n      return res;\n    }\n    return false;\n  };\n\n  /*\n   * Test for HTML5 canvas.\n   * Note: No compatible polyfill (Flash-based ones won't work for WebVR).\n   */\n  tests['canvas'] = function () {\n    return !!window.CanvasRenderingContext2D;\n  };\n\n  /*\n   * Test for WebGL support in browsers supporting HTML5 canvas.\n   * IE 9, 10 Polyfill available (non-Flash).\n   * @link https://github.com/iewebgl/iewebgl\n   */\n  tests['webGL'] = function () {\n    if (tests['canvas']() && document.createElement) {\n        cs = document.createElement('canvas');\n        for (i in names) {\n          try {\n            ctx = cs.getContext(names[i]);\n            if (ctx && typeof ctx.getParameter == 'function') {\n              cs = ctx = null;\n              return true;\n            }\n          } catch (e) {}\n        }\n    }\n    cs = ctx = null;\n    return false;\n  };\n\n  /*\n   * It is easier to re-create the WebGL context when\n   * extraction version data, instead of trying to add it\n   * to tests[] array.\n   */\n  tests['glVersion'] = function () {\n    if (tests['canvas']() && document.createElement) {\n        cs = document.createElement('canvas');\n        for (i in names) {\n          try {\n            ctx = cs.getContext(names[i]);\n            if (ctx && typeof ctx.getParameter == 'function') {\n              var vers = ctx.getParameter(ctx.VERSION).toLowerCase();\n              cs = ctx = null;\n              return vers;\n            }\n          } catch (e) {}\n        }\n    }\n    cs = ctx = null;\n    return false;\n  };\n\n  /*\n   * Detect Promise object support, missing in\n   * all IE, Chrome < 33, FF < 29, Safari < 7.1,\n   * iOS < 8, Android < 4.4.4.\n   */\n  tests['promise'] = function () {\n    return ('Promise' in window);\n  };\n\n  /*\n   * Detect support for WebWorkers, used in many 3D libraries, missing in\n   * IE < 11, FF < 3.5, Safari < 4, iOS < 5.1, Android < 4.4.\n   */\n  tests['workers'] = function () {\n    return !!window.Worker;\n  };\n\n  /*\n   * Detect FileAPI support, may be usefulf or object\n   * management in VR spaces, missing in\n   * IE < 10, Chrome < 38, FF < 28, Safari < 5.1, iOS < 6,\n   * Android < 3\n   */\n  tests['fileapi'] = function () {\n    return !!(window.File && window.FileReader && window.FileList && window.Blob);\n  };\n\n  /*\n  * Detect localStorage support, may be useful for object\n  * management in VR spaces, not supported in\n  * IE < 8, FF < 3.5, Safari < 4.\n  */\n  tests['localStorage'] = function () {\n    var mod = 'test';\n      try {\n           localStorage.setItem(mod, mod);\n           localStorage.removeItem(mod);\n           return true;\n       } catch(e) {\n           return false;\n       }\n   };\n\n   /*\n    * Detect fetch (alternative to XHR) API support, better for\n    * dynamic object requests than Ajax, missing in\n    * All IE, Edge < 14, Chrome < 42, FF < 39, All Safari,\n    * Android < 5.6.\n    */\n  tests['fetch'] = function () {\n    return ('fetch' in window);\n  };\n\n  /*\n   * Detect support for .querySelectorAll, missing in\n   * IE < 9, FF < 3.5\n   */\n  tests['querySelectorAll'] = function () {\n    return !!document.querySelectorAll;\n  };\n\n  /*\n   * Detect support for addEventListener, missing in\n   * IE < 9.\n   */\n  tests['addEventListener'] = function () {\n    return ('addEventListener' in window);\n  };\n\n  /*\n   * Detect support for CustomEvents, missing in\n   * IE 9, 10, 11, Android < 4.4\n   */\n  tests['CustomEvent'] = function () {\n    try {\n      new CustomEvent('test');\n    } catch(e) {\n      return false;\n    }\n    return true;\n  };\n\n  /*\n   * Detect support for a specific event type.\n   * @link http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\n   */\n  var eventSupport_ = function(elem, eventName) {\n    eventName = 'on' + eventName;\n    var isSupported = (eventName in elem);\n    if (!isSupported && 'setAttribute' in elem) {\n      elem.setAttribute(eventName, 'return;');\n      isSupported = typeof elem[eventName] == 'function';\n      elem.removeAttribute(eventName);\n    }\n    return isSupported;\n  };\n\n  /*\n   * Support for ES5 properties, missing in\n   * IE < 9, Chrome < 23, FF < 21, Safari < 6,\n   * Android < 4.4\n   */\n  tests['defineProperty'] = function () {\n    return ('defineProperty' in Object);\n  };\n\n  tests['defineProperties'] = function () {\n    return ('defineProperties' in Object);\n  };\n\n  /*\n   * Detect typed arrays (needed for WebGL), missing in\n   * IE < 11, Chrome < 7, FF < 4, Safari < 6,\n   * Android < 4.\n   */\n  tests['typedArray'] = function () {\n    return ('ArrayBuffer' in window);\n  };\n\n  /*\n   * Detect support for W3C Fullscreen API. No browser completely\n   * and consistently supports the W3C standard. Partial support\n   * in IE Edge, Chrome > 14, FF > 9, Safari > 5. NO SUPPORT in\n   * Android and iOS Safari browser.\n   *\n   */\n  tests['fullScreen'] = function () {\n    return !!(document.documentElement.requestFullscreen);\n  };\n\n  /*\n   * Detect touch support.\n   * useful for changing the Ui if touch is used, missing in\n   * IE, Edge, Chrome < 22, FF, Safari. Full support in iOS\n   * Safari and Android.\n   */\n  tests['touch'] = function () {\n    return !!(('ontouchstart' in window) || (window.DocumentTouch && document instanceof DocumentTouch));\n  };\n\n  /*\n   * Detect native support for requestAnimationFrame, missing in\n   * IE < 11, Chrome < 10, FF < 4, Safari < 6, Android < 4.4\n   */\n  tests['requestAnimationFrame'] = function () {\n    return ('requestAnimationFrame' in window);\n  };\n\n  /*\n   * Gamepad API, used by haptic controllers.\n   * No IE Support, Chrome < 21, FF < 29, no iOS or\n   * Android support. Wii has its own non-W3C version,\n   * window.wiiu.gamepad\n   */\n  tests['gamepad'] = function () {\n    return !!navigator.getGamepads;\n  };\n\n  /*\n   * Test for WebVR API.\n   * @link https://iswebvrready.org/\n   */\n  tests['webvr'] = function () {\n    if ('getVRDisplays' in navigator) {\n      ;\n      return true;\n    } else if ('getVRDevices' in navigator || 'mozGetVRDevices' in navigator) {\n      ;\n      return false;\n    }\n    else {\n      return false;\n    }\n  };\n\n  /*\n   * Test for IE and Edge versions. UA string is so abused that \n   * we test features to confirm.\n   * IE10 : CanvasRenderer\n   * IE11+: WebGL\n   * @link http://tanalin.com/en/articles/ie-version-js/\n   * @link https://codepen.io/gapcode/pen/vEJNZN\n   * @returns if IE or Edge, the version number, else false.\n   */\n  tests['ie'] = function () {\n    if (ua.indexOf('msie ') >= 0 || \n      ua.indexOf('trident') >= 0 || \n      ua.indexOf('edge/') >= 0) {\n      if (!('netscape' in window) && !window.opera) {\n        // Old browsers that can't run THREE\n        if (document.compatMode && !window.atob) {\n          if (!!window.XMLHttpRequest) { //ie7 text\n            return 6;\n          } else if (!document.querySelector) {\n            return 7;\n          } else if (!document.addEventListener) {\n            return 8;\n          } else {\n            return 9;\n          }\n        } else {\n          if(!!window.Promise) {\n            //Edge, implements Promise object\n            var x = ua.indexOf('edge/');\n            return parseInt(ua.substring(x + 5, ua.indexOf('.', x)), 10);\n          } else if (window.atob) {\n            if (!(window.ActiveXObject) && \"ActiveXObject\" in window) {\n              return 11; // Supports THREE WebGL\n            } else {\n              return 10; // Supports THREE CanvasRenderer\n            }\n          }\n          return 5;\n        }\n      }\n    }\n    return false;\n  }\n\n  /** \n   * Test for firefox. To handle Gecko clones, we feature-detect old browsers, and \n   * use the user-agent for newer ones able to run THREE.\n   * Compatible:\n   * FF 15+ : CanvasRenderer\n   * @link http://browserhacks.com/\n   * @link https://davidwalsh.name/check-parent-node\n   * @link http://stackoverflow.com/questions/7000190/detect-all-firefox-versions-in-js\n   */\n  tests['firefox'] = function () {\n    if (!('netscape' in window)) {\n      return false;\n    }\n    verOffset = ua.indexOf('firefox');\n    // Feature test old browsers that can't run THREE\n    if (typeof window.devicePixelRatio === undefined) {\n      try {\n        if (typeof window.alert !== undefined && \n          typeof window.XPCNativeWrapper === undefined &&\n          typeof window.URL === undefined) {\n            return 1;\n        } else if(typeof window.XPCNativeWrapper !== undefined) {\n            return 1.5\n        } else if (typeof window.globalStorage !== undefined && \n            typeof window.postMessage === undefined) {\n            return 2;\n        } else if (typeof window.postMessage !== undefined &&\n            typeof document.querySelector === undefined) {\n            return 3;\n        } else if (typeof document.querySelector !== undefined &&\n            typeof window.mozRequestAnimationFrame === undefined) {\n            return 3.5;\n        } else if (typeof window.URL !== undefined &&\n            typeof createdElement.style.MozAnimation === undefined) {\n            return 4; // WebGL available.\n        } else if (typeof createdElement.style.MozAnimation !== undefined &&\n            typeof WeakMap === undefined) {\n            return 5; // WebGL available CORS textures disabled.\n        } else if (typeof WeakMap !== undefined &&\n            typeof createdElement.style.textOverflow === undefined) {\n            return 6;\n        } else if (typeof createdElement.style.textOverflow !== undefined &&\n            typeof createdElement.insertAdjacentHTML === undefined) {\n            return 7;\n        } else if (typeof createdElement.insertAdjacentHTML !== undefined &&\n            typeof navigator.doNotTrack === undefined) {\n            return 8; // CORS re-enabled for WebGL textures.\n        } else if (typeof window.mozIndexedDB !== undefined &&\n            typeof document.mozFullScreenEnabled === undefined) {\n            return 9;\n        } else if (typeof document.mozFullScreenEnabled !== undefined &&\n            typeof window.mozCancelAnimationFrame === undefined &&\n            typeof Reflect === undefined) {\n            return 10;\n        } else if (typeof window.mozCancelAnimationFrame !== undefined &&\n            typeof createdElement.style.MozTextAlignLast === undefined) {\n            return 11;\n        } else if (typeof createdElement.style.MozTextAlignLast !== undefined &&\n            typeof createdElement.style.MozOpacity !== undefined) {\n            return 12;\n        } else if (typeof createdElement.style.MozOpacity === undefined &&\n            typeof window.globalStorage !== undefined) {\n            return 13;\n        } else if (typeof window.globalStorage === undefined &&\n            typeof createdElement.style.borderImage === undefined &&\n            typeof document.querySelector !== undefined) {\n            return 14;\n        } else if (typeof createdElement.style.borderImage !== undefined &&\n            typeof createdElement.style.animation === undefined) {\n            return 15; // First version that works with CanvasRenderer\n        } else if (typeof createdElement.style.animation !== undefined &&\n            typeof createdElement.style.iterator === undefined &&\n            typeof Math.hypot === undefined) {\n            return 16;\n        } else {\n            return 17;\n        }\n      } catch (e) {\n        ;\n      } // end of try...catch\n    } // end of device.pixelRatio test\n    // for new browsers and old browsers with console.config features disabled\n    if (verOffset !== -1) {\n      x = navigator.userAgent.substring(verOffset+8);\n      return parseInt(x);\n    }\n    return false;\n  };\n\n  /* \n   * Feature test for chrome. We feature-detect out non-chrome browsers, \n   * then do some feature-testing for individual versions of chrome. Otherwise, \n   * trust the user agent string.\n   * Compatible:\n   * Chrome 24+ : CanvasRenderer\n   * @link http://stackoverflow.com/questions/4565112/javascript-how-to-find-out-if-the-user-browser-is-chrome\n   */\n  tests['chrome'] = function () {\n    // ua wrapper, trap out Edge, which HAS window.chrome === true, also some \n    // versions of Chrome which return a undefined instead of object.\n    if ((window.chrome !== null && \n      window.chrome !== undefined && \n      !ua.indexOf('opr') > -1 && \n      !ua.indexOf('edge/') > -1) || \n      ua.match('crios')) {\n      // feature-test chrome candidate.\n        if (window.onhashchange === undefined) {\n          return 4;\n        } else if (typeof window.performance === undefined) {\n          return 5;\n        } else if (('ArrayBuffer' in window) === undefined) {\n          return 6;\n        } else if (window.URL !== undefined && \n          window.URL.createObjectURL === undefined) {\n          return 7;\n        } else if (window.matchMedia === undefined) {\n          return 8;\n        } else if (window.AudioContext === undefined && \n          window.webkitAudioContext === undefined) {\n          return 9;\n        } else if (window.crypto === undefined) {\n          return 10;\n        }\n\n////////////\n       if(typeof document['hidden'] === undefined) {\n          // 11, 12, 13 don't have page visiblity API\n       }\n\n////////////\n        if (typeof window.Intl !== undefined ) {\n          return 24;\n        }\n    }\n\n    return false;\n  }\n\n  /*\n   * Microloader. Store polyfills to load. Deliberately old-school for maximum browser support.\n   * @link https://css-tricks.com/snippets/javascript/async-script-loader-with-callback/\n   * @link https://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/\n  */\n  function load (batches, callback, progressFn, failFn) {\n    var head = document.getElementsByTagName('head')[0] || document.documentElement,\n    batchLength = 0,\n    batchCount = 0,\n    scriptLength = 0,\n    scriptCount = 0,\n    gScriptCount = 0,\n    scriptsToLoad = 0;\n\n    var err_ = function (s, msg) {\n      ;\n      ;\n      if (s && s.nodeType) {\n        try {\n          head.removeChild(s);\n        } catch (e) {};\n      }\n      if(failFn) {\n        failFn('error at script #:', batchCount, scriptCount, s);\n        s = null;\n      }\n    };\n\n    var clear_ = function (s) {\n      //clear the event and prevent memory leaks\n      \n      if (s) {\n      // Progress report.\n        gScriptCount++;\n        progressFn(parseInt(100 * gScriptCount / scriptsToLoad), s.src);\n        \n        try {\n          head.removeChild(s);\n        } catch (e) {};\n\n        s.onreadystatechange = s.onload = null;\n        s = null;\n      }\n      // Increment script and possibly batch.\n      scriptCount++;\n      if (scriptCount >= scriptLength) {\n        scriptCount = 0; batchCount++;\n        if (batchCount < batchLength) {\n          runScriptBatch(batches[batchCount])\n        } else {\n          \n          callback();\n        }\n      }\n    };\n\n    function runScriptBatch (batchScript) {\n      \n      for (var i = 0; i < batchScript.length; i++) {\n        scriptLength = batchScript.length; //NOTE: if done outside for (), incorrect value in old IE.\n        var scr = batchScript[i];\n        if (!scr) {\n          clear_(); //empty script\n          break;\n        }\n        // If we don't need the polyfill, don't load it\n        if (scr.poly === true && self.results[scr.name] === true) {\n          ;\n          clear_();\n        } else {\n          \n          //scr.script = document.createElement('script');\n          var s = document.createElement('script'); //scr.script;\n          s.type = 'text\\/javascript';\n          s.charset = 'utf8';\n          s.async = true;\n          s.src = scr.path;\n          // Old IE version.\n          if (s.onreadystatechange !== undefined) {\n            s.onreadystatechange = function () {\n              \n              \n              if (/loaded|complete/.test(this.readyState)) {\n                  ;\n                  //head.insertBefore(s, head.firstChild);\n                  this.onreadystatechange = null;\n                  \n                  clear_(this);\n\n                // IE hack to stop loading\n                var firstState = this.readyState;\n                this.children;\n                if (firstState == 'loaded' && this.readyState == 'loading') {\n                  err_(this, 'error in readyState load for:' + e.srcElement.baseURI);\n                  this.onreadystatechange = null;\n                  clear_(this);\n                  return;\n                }\n              } //loaded or complete\n            }\n          } else if (s.onload !== undefined) {\n            s.onload = function (e) {\n              ;\n              \n              clear_(this);\n              return;\n            }\n            s.onerror = function (e) {\n              err_(e.target, 'error in onload for:' + e.target);\n            }\n          } else {\n            err_(s,'script loading not supported for:' + scr.path, ' type:' + typeof s + ' nodeType:' + typeof s.nodeType);\n          }\n\n        // Add script to document.head.\n        //console.log('self.head is a:' + self.head)\n        //TODO: TEST ON OLD IE FOR COMPLETION.\n        //TODO: may need to use createNode like below\n        //@link http://stackoverflow.com/questions/6946631/dynamically-creating-script-readystate-never-complete\n          head.insertBefore(s, head.firstChild);\n        } //end of batch[i].name test\n      } // end of for () loop\n      //We only go here if there's an empty batch!\n      if(batchScript.length == 0) {\n        failFn('Loader: empty batch [] at index:', batchCount, 0, 0, 'undefined');\n      }\n    }; // end of function\n\n    // Main program. Count scripts to load.\n    ;\n\n    // Scripts is an array of arrays\n    for (var i = 0, len = batches.length; i < len; i++) {\n      for (var j = 0, len2 = batches[i].length; j < len2; j++) {\n        var scr = batches[i][j];\n        if (!scr) {\n          failFn('Loader: missing object (probably trailing comma) for batch index:', i, j, scr);\n          //return false;\n        } else {\n\n        // Make sure the necessary data is present.\n        if (!scr.name || !scr.path || scr.poly === undefined) {\n            if (scr.name) {\n              scr = scr.name;\n            }\n            failFn('Loader: incorrect batch syntax for batch index:', i, j, scr);\n            return false;\n          }\n        if (scr.poly === true) {\n          if (!self.results[scr.name]) {\n            scriptsToLoad++;\n          }\n        } else {\n          scriptsToLoad++;\n        }\n      }\n      }\n    }\n\n    // Set starting length of batches.\n    batchLength = batches.length;\n    // Load scripts\n    runScriptBatch(batches[batchCount]);\n  }; // End of microloader.\n\n  // Redetect after loading complete\n  function reDetect () {\n    for (var i in retests) {\n      ;\n      if (self.results[i] === undefined) {\n        ;\n      } else if (!self.results[i]) {\n        ;\n        self.results[i] = tests[i]();\n        if (self.results[i]) {\n          ;\n        } else {\n          ;\n        }\n      }\n    }\n  };\n\n  // Detect features. Export so we can re-detect after polyfills are loaded.\n  // tests used by other tests can be pre-computed.\n  function detect() {\n    self.results = {\n      deviceorientation: eventSupport_(window, 'deviceorientation'),\n      devicemotion: eventSupport_(window, 'devicemotion'),\n      load: load,\n      detect: detect,\n      reDetect: reDetect\n    };\n    for (var i in tests) {\n      if (typeof(tests[i]) === 'function') { // this allows us to pre-compute some results.\n        self.results[i] = tests[i]();\n      } else {\n        self.results[i] = tests[i];\n      }\n    };\n    return self.results;\n  }\n\n  // Fire first detection and report results.\n  window.WebVRFeatureDetector = detect();\n\n})(window);\n"]}
{"version":3,"sources":["node_modules\\browser-pack\\_prelude.js","src\\bundle.js"],"names":["win","getVer","str","fflag","result","verReg","exec","parseFloat","parseInt","load","batches","callback","progressFn","failFn","runScriptBatch","batchScript","i","length","scriptLength","scr","clear_","poly","self","results","name","s","document","createElement","type","charset","async","src","path","undefined","onreadystatechange","test","this","readyState","firstState","children","err_","e","srcElement","baseURI","onload","onerror","target","nodeType","head","insertBefore","firstChild","batchCount","getElementsByTagName","documentElement","batchLength","scriptCount","gScriptCount","scriptsToLoad","msg","removeChild","len","j","len2","reDetect","retests","tests","detect","deviceorientation","eventSupport_","devicemotion","cs","ctx","glType","glVers","names","XMLHttpRequest","overrideMimeType","prototype","con","log","val","error","console","m","ua","navigator","userAgent","toLowerCase","verOffset","ver","RegExp","browser","opera","opr","addons","indexOf","firefox","netscape","InstallTrigger","style","safari","Object","toString","call","HTMLElement","ie","documentMode","chrome","Geolocation","webstore","match","edge","styleMedia","Promise","mobileSafari","mobileChrome","samsung","samsungGearVR","mobileFirefox","os","ios","android","chromeos","silk","sailfish","tizen","webos","windowsphone","blackberry","firefoxos","windows","mac","linux","substring","platform","tablet","xbox","wii","nintendo","playstation","tv","mobile","desktop","canvas","CanvasRenderingContext2D","requestPointerLock","sendBeacon","compatMode","atob","querySelector","addEventListener","ActiveXObject","devicePixelRatio","alert","XPCNativeWrapper","URL","globalStorage","postMessage","mozRequestAnimationFrame","createdElement","MozAnimation","textOverflow","insertAdjacentHTML","doNotTrack","mozIndexedDB","mozFullScreenEnabled","mozCancelAnimationFrame","Reflect","MozTextAlignLast","MozOpacity","borderImage","animation","iterator","Math","hypot","EventSource","ArrayBuffer","createObjectURL","matchMedia","webkitRequestAnimationFrame","crypto","registerProtocolHandler","scrollIntoViewIfNeeded","webkitRequestFullScreen","CustomEvent","MutationObserver","performance","now","getGamepads","MediaSource","Intl","createShadowRoot","CSS","supports","version","JSON","geolocation","vibrate","webkitRTCPeerConnection","matches","window","SpeechSynthesisUtterance","timing","closest","iOS","FileReader","getComputedStyle","a","innerHTML","res","WebGLRenderingContext","getContext","getParameter","VERSION","Worker","File","FileList","Blob","mod","localStorage","setItem","removeItem","querySelectorAll","styles","pre","Array","slice","join","js","css","elem","cssText","r","pointerEvents","eventName","isSupported","setAttribute","removeAttribute","DocumentTouch","touch","width","max","screen","height","min","pixelRatio","pixelWidth","pixelHeight","retina","longest","WebVRFeatureDetector"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\r\n * Device and feature detector for WebVR projects needing to provide\r\n * graceful decay for old and obsolete browsers.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the 'License');\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an 'AS IS' BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n(function (win) {\r\n\r\n    var self = this; // Scope.\r\n\r\n    var cs, ctx, glType = '', glVers = '', tests = [], retests = {}; self.results = {};\r\n\r\n    var names = ['webgl', 'experimental-webgl', 'moz-webgl', 'experimental-webgl2', '3d'];\r\n\r\n    /*\r\n     * Patches and fixes.\r\n     *\r\n     * This hack lets IE10 render to canvas with newer versions of\r\n     * of THREE.js (which use overrideMimeType in the Object loader).\r\n     */\r\n    if( win.XMLHttpRequest && !XMLHttpRequest.overrideMimeType ) {\r\n\r\n        XMLHttpRequest.prototype.overrideMimeType = function ( type ) {};\r\n\r\n    }\r\n\r\n  /* \r\n   * Remove errors for console.log or console.error executing on ancient browsers.\r\n   * Add 'alert' if debugging is desired.\r\n   */\r\n    ( function ( con ) {\r\n        if (!con.log) con.log = function (val) {}; // debug with alert(val)\r\n        if (!con.error) con.error = function (val) {}; // debug with alert(val)\r\n    } )( win.console = win.console || {} );\r\n\r\n    /* \r\n     * feature detect browsers, modified from: \r\n     * @link https://jsfiddle.net/9atsffau/\r\n     * @link http://www.opentechguides.com/how-to/article/javascript/99/browser-detect.html\r\n     */\r\n    var ua = navigator.userAgent.toLowerCase(), verOffset = -1, ver = false, m, verReg = new RegExp('[0-9]+');\r\n\r\n    /* \r\n     * Preliminary feature detect to differentiate common browsers\r\n     */\r\n  var browser = {\r\n\r\n        // Opera old and new\r\n\r\n        opera: (!!win.opr && !!opr.addons) || !!win.opera || ua.indexOf(' opr/') > -1 || ua.indexOf('opios') > -1 || false,\r\n\r\n        // Firefox 1.0+\r\n\r\n        firefox: !!win.netscape || typeof InstallTrigger !== 'undefined' || 'MozAppearance' in document.documentElement.style,\r\n\r\n        // At least Safari 3+: \"[object HTMLElementConstructor]\"\r\n\r\n        safari: Object.prototype.toString.call(win.HTMLElement).indexOf('Constructor') > 0,\r\n\r\n        // Internet Explorer 6-11\r\n\r\n        ie: /*@cc_on!@*/false || !!document.documentMode\r\n\r\n  };\r\n\r\n    // Blink engine detection\r\n    //blink: (isChrome || isOpera) && !!win.CSS\r\n\r\n    // Feature-detect additional browsers, using results of first tests\r\n\r\n    browser.chrome = !browser.opera && (!!win.chrome && !win.Geolocation) || !!(win.chrome && win.chrome.webstore) || ua.match('crios') || false;\r\n\r\n    browser.edge = !browser.safari && !browser.ie && !!win.Geolocation && !browser.chrome && !browser.firefox && !browser.opera && !!win.styleMedia && !!win.Promise;\r\n\r\n    browser.mobileSafari = browser.safari && ua.indexOf('mobile') > -1 || false; //detect later\r\n\r\n    browser.mobileChrome = browser.chrome && ua.indexOf('mobile') > -1 || false;\r\n\r\n    //http://developer.samsung.com/technical-doc/view.do?v=T000000270&pi=1&ps=10&pb=Y&ct=CT330000&sc=javascript\r\n\r\n    browser.samsung = ua.indexOf('samsung') > -1 || false;\r\n\r\n    browser.samsungGearVR = ua.indexOf('mobile vr') > -1 || false; //impt for GearVR\r\n\r\n    browser.mobileFirefox = browser.firefox && ua.indexOf('mobile') > -1 || false;\r\n\r\n    /* \r\n     * Look for the browser version number in a user-agent string. \r\n     * Fallback when browser feature detection doesn't work.\r\n     * @param String str the user-agent string.\r\n     * @param Boolean fflag if true, return float;\r\n     * @reaturns Number version number.\r\n     */\r\n    function getVer ( str, fflag ) {\r\n\r\n        var result = verReg.exec( str );\r\n\r\n        if ( result && result[0] ) {\r\n\r\n            if ( fflag ) {\r\n\r\n                return parseFloat( result[0] );\r\n\r\n            }\r\n\r\n            return parseInt( result[0] );\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n    };\r\n\r\n    /* \r\n     * Operating systems. These generally can't be feature-detected, se \r\n     * we sniff the user-agent. Needed for browser determinations later, \r\n     * so done before our detect. Adapted from:\r\n     * @link https://github.com/ded/bowser/blob/master/src/bowser.js#L29\r\n     */\r\n    var os = {\r\n\r\n        ios: ua.match( /(ipod|iphone|ipad)/ ) || false,\r\n\r\n        android: ua.indexOf( 'android' ) > -1 || false,\r\n\r\n        chromeos: ua.indexOf( 'cros' ) > -1 || false,\r\n\r\n        silk: ua.indexOf( 'silk' ) > -1 || false,\r\n\r\n        sailfish: ua.indexOf( 'sailfish' ) > -1 || false, // linux mobile os with webgl\r\n\r\n        tizen: ua.indexOf( 'tizen' ) > -1 || false,\r\n\r\n        webos: /(web|hpw)os/i.test( ua ) || false,\r\n\r\n        windowsphone: ua.indexOf( 'windows phone' ) > -1 || false,\r\n\r\n        blackberry: /(blackberry|bb10|rim[0-9])/.test(ua),\r\n\r\n        firefoxos: /mobile.*(firefox)/i.test( ua ) || false\r\n\r\n    };\r\n\r\n    // Additional OS matches completed after first round\r\n\r\n    os.windows = !os.windowsphone && ua.indexOf( 'windows' ) > -1,\r\n\r\n    os.mac = !os.ios && !os.silk && /(macintosh|mac os)/.test( ua ) || false,\r\n\r\n    os.linux = !os.android && !os.sailfish && !os.tizen && !os.webos && ua.indexOf( 'linux' ) > -1;\r\n\r\n    /* \r\n     * OS Version detects (mobile and netbooks only). Some tests adapted from \r\n     * @link https://github.com/faisalman/ua-parser-js/blob/master/src/ua-parser.js\r\n     */\r\n    if ( os.ios ) {\r\n\r\n        m = ( ua ).match( /os (\\d+)_(\\d+)_?(\\d+)?/ );\r\n\r\n        if ( m && m[1] && m[2] ) {\r\n\r\n            os.ios = parseFloat( m[1] + '.' + m[2] );\r\n\r\n        }\r\n\r\n    } else if ( os.chromeos ) {\r\n\r\n        m = ( ua ).match( /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/ );\r\n\r\n        if ( m && m[1] && m[2] ) {\r\n\r\n            os.chromeos = parseFloat( m[2] ); // not a float\r\n\r\n        }\r\n\r\n    } else if ( os.linux ) {\r\n\r\n        // TODO: Linux detects here (a real mess)\r\n\r\n    } else if ( os.android ) {\r\n\r\n        m = ua.match( /android (\\d+(?:\\.\\d+)+)[;)]/ );\r\n\r\n        if ( m && m[0] ) {\r\n\r\n            os.android = parseFloat( m[0] );\r\n\r\n        }\r\n\r\n    } else if ( os.windowsphone ) {\r\n\r\n        m = ua.match( /windows phone (\\d+\\.\\d+)/ );\r\n\r\n        if ( m && m[1] ) {\r\n\r\n            os.windowsphone = parseFloat( m[1] );\r\n\r\n        }\r\n\r\n    } else if ( os.blackberry ) {\r\n\r\n        if (ua.indexOf( 'bb10' ) >= 0) { // only Blackberry 10 phones support WebGL\r\n\r\n            m = ua.match( /bb10.*version\\/(\\d+\\.\\d+)?/ );\r\n\r\n            if ( m && m[1] ) {\r\n\r\n                os.blackberry = parseFloat( m[1] );\r\n            }\r\n\r\n        }\r\n\r\n    } else if ( os.tizen ) {\r\n\r\n        m = ua.match( /tizen.*(\\d+\\.\\d+)/ );\r\n\r\n        if ( m && m[0] ) {\r\n\r\n            os.tizen = parseFloat( m[0] );\r\n\r\n        }\r\n\r\n    } else if ( os.windows ) {\r\n\r\n        verOffset = ua.indexOf('windows nt ');\r\n\r\n        ver = getVer( ua.substring( verOffset+11 ), true );\r\n\r\n        switch ( ver ) {\r\n\r\n            case 10.0:\r\n                os.windows = '10';\r\n                break;\r\n\r\n            case 6.2:\r\n                os.windows = '8';\r\n                break;\r\n\r\n            case 6.1:\r\n                os.windows = '7';\r\n                break;\r\n\r\n            case 6.0:\r\n                os.windows = 'vista';\r\n                break;\r\n\r\n            case 5.1:\r\n                os.windows = 'xp';\r\n                break;\r\n\r\n            default:\r\n                break;\r\n\r\n        }\r\n\r\n    } else if ( os.mac ) {\r\n\r\n      // Not used.\r\n\r\n    }\r\n\r\n    // Hardware form-factor\r\n\r\n    var platform = {\r\n\r\n        tablet: ua.indexOf('tablet') > -1,\r\n\r\n        xbox: ua.indexOf('xbox') > -1,\r\n\r\n        wii: ua.indexOf('wiiu') > -1,\r\n\r\n        nintendo: ua.indexOf('nintendo') > -1,\r\n\r\n        playstation: ua.indexOf('playstation') > -1\r\n\r\n    };\r\n\r\n    // Additional detects after first pass\r\n\r\n    platform.console = platform.xbox || platform.wii || platform.playstation || false,\r\n\r\n    platform.tv = /(google|apple|smart|hbb|opera|pov|net).*tv|(lg|aquos|inettv).*browser|(roku|kylo|aquos|viera|espial|boxee|dlnadoc|crkey|ce-html)/.test(ua) || false,\r\n\r\n    platform.mobile = !platform.tablet && !platform.tv && !(os.ios || os.android || os.silk || os.sailfish || os.tizen || os.webos || /[^-]mobi/i.test(ua) > -1) || false,\r\n\r\n    platform.desktop = !platform.mobile && !platform.tablet && !platform.console && !platform.tv;\r\n\r\n    // Test for very basic features here that other feature tests depend on\r\n\r\n    var createElement = !!document.createElement;\r\n\r\n    var canvas = !!win.CanvasRenderingContext2D;\r\n\r\n  /* \r\n   * Detect browsers by features (not user-agent sniffing)\r\n   *\r\n   * Test for Edge versions. All work with WeGL, \r\n   * THREE v77 and WebVR-polyfill\r\n   */\r\n    if ( browser.edge )  {\r\n\r\n        browser.edge = ( function () {\r\n\r\n            if (!document.documentElement.requestPointerLock) {\r\n\r\n                return 12;\r\n\r\n            } else if (!navigator.sendBeacon) {\r\n\r\n                return 13;\r\n\r\n            }\r\n\r\n            // Fallback for new browsers with undefined feature-testing\r\n\r\n            verOffset = ua.indexOf('edge/');\r\n\r\n            if (verOffset !== -1) {\r\n\r\n                return getVer(ua.substring(verOffset+8));\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        } )();\r\n\r\n    }\r\n\r\n    /*\r\n     * Test for IE versions by features\r\n     * IE10 : CanvasRenderer\r\n     * IE11+: WebGL\r\n     * @link http://tanalin.com/en/articles/ie-version-js/\r\n     * @link https://codepen.io/gapcode/pen/vEJNZN\r\n     * @returns if IE or Edge, the version number, else false.\r\n     */\r\n    if ( browser.ie ) {\r\n\r\n        browser.ie = ( function () {\r\n\r\n            // Feature-test IE candidate, fallback to user-agent if fails\r\n\r\n            if ( document.compatMode && !win.atob ) {\r\n\r\n                if ( ! win.XMLHttpRequest ) { //ie7 test, only works in 'real' IE6\r\n\r\n                    return 6;\r\n\r\n                } else if ( ! document.querySelector ) {\r\n\r\n                    return 7;\r\n\r\n                } else if ( ! document.addEventListener ) {\r\n\r\n                    return 8;\r\n\r\n                } else {\r\n\r\n                    return 9;\r\n\r\n                }\r\n\r\n            } else { // Modern.IE\r\n\r\n                if( ! win.Promise && win.atob ) {\r\n\r\n                    if ( ! win.ActiveXObject && \"ActiveXObject\" in win ) {\r\n\r\n                        return 11; // Supports THREE WebGL\r\n\r\n                    } else {\r\n\r\n                        return 10; // Supports THREE CanvasRenderer\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return 5;\r\n            }\r\n\r\n            return false;\r\n\r\n        } )();\r\n\r\n    }\r\n\r\n    /** \r\n     * Test for firefox. To handle Gecko clones, we feature-detect old browsers, and \r\n     * use the user-agent for newer ones able to run THREE.\r\n     * Compatible:\r\n     * FF 15+ : CanvasRenderer\r\n     * @link http://browserhacks.com/\r\n     * @link https://davidwalsh.name/check-parent-node\r\n     * @link http://stackoverflow.com/questions/7000190/detect-all-firefox-versions-in-js\r\n     */\r\n    if ( browser.firefox ) {\r\n\r\n        browser.firefox = ( function () {\r\n\r\n            // Find old and obsolete Gecko clones\r\n\r\n            if ( typeof win.devicePixelRatio === undefined ) {\r\n\r\n                try {\r\n\r\n                    if ( win.alert && ! win.XPCNativeWrapper && ! win.URL ) {\r\n\r\n                        return 1;\r\n\r\n                    } else if( win.XPCNativeWrapper ) {\r\n\r\n                        return 1.5;\r\n\r\n                    } else if ( win.globalStorage && ! win.postMessage ) {\r\n\r\n                        return 2;\r\n\r\n                    } else if ( ! document.querySelector ) {\r\n\r\n                        return 3;\r\n\r\n                    } else if ( ! win.mozRequestAnimationFrame ) {\r\n\r\n                        return 3.5;\r\n\r\n                    } else if ( win.URL && ! createdElement.style.MozAnimation ) {\r\n\r\n                        return 4; // WebGL available\r\n\r\n                    } else if ( ! typeof WeakMap ) {\r\n\r\n                        return 5; // WebGL available CORS textures disabled\r\n\r\n                    } else if ( ! createdElement.style.textOverflow ) {\r\n\r\n                        return 6;\r\n\r\n                    } else if ( ! createdElement.insertAdjacentHTML ) {\r\n\r\n                        return 7;\r\n\r\n                    } else if ( ! navigator.doNotTrack ) {\r\n\r\n                        return 8; // CORS re-enabled for WebGL textures\r\n\r\n                    } else if ( win.mozIndexedDB && ! document.mozFullScreenEnabled ) {\r\n\r\n                        return 9;\r\n\r\n                    } else if ( ! win.mozCancelAnimationFrame && !Reflect === undefined ) {\r\n\r\n                        return 10;\r\n\r\n                    } else if ( ! createdElement.style.MozTextAlignLast ) {\r\n\r\n                        return 11;\r\n\r\n                    } else if ( ! createdElement.style.MozOpacity ) {\r\n\r\n                        return 12;\r\n\r\n                    } else if ( ! createdElement.style.MozOpacity && win.globalStorage ) {\r\n\r\n                        return 13;\r\n\r\n                    } else if ( ! win.globalStorage && !createdElement.style.borderImage ) {\r\n\r\n                        return 14;\r\n\r\n                    } else if ( ! createdElement.style.animation ) {\r\n\r\n                        return 15; // First version that works with CanvasRenderer\r\n\r\n                    } else if ( ! createdElement.style.iterator && ! Math.hypot ) {\r\n\r\n                        return 16;\r\n\r\n                    } else {\r\n\r\n                        return 17; // last version without device.pixelRatio\r\n\r\n                    }\r\n\r\n                } catch ( e ) {\r\n\r\n                    ;\r\n\r\n                } // end of try...catch\r\n\r\n            } // end of device.pixelRatio test\r\n\r\n            // version 23 first support for CSS.supports();\r\n\r\n            // fallback for new browsers, and old browsers with console.config features disabled\r\n            verOffset = ua.indexOf( 'firefox' );\r\n\r\n            if ( verOffset !== -1 ) {\r\n\r\n                return getVer( navigator.userAgent.substring(verOffset+8) );\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        } )();\r\n\r\n    }\r\n\r\n    //TODO: research Firefox mobile https://en.wikipedia.org/wiki/Firefox_for_mobile\r\n    //TODO: https://html5test.com/compare/browser/android.samsung-3.0/nintendowiiu-4/xboxone-10.0/firefoxmobile-40.html\r\n\r\n    /* \r\n     * Feature test for Google Chrome. We feature-detect out non-chrome browsers, \r\n     * then do some feature-testing for individual versions of chrome. Otherwise, \r\n     * trust the user agent string.\r\n     * Compatible:\r\n     * Chrome 24+ : CanvasRenderer\r\n     * @link http://browsershots.org/\r\n     * @link http://oldversion.com\r\n     * @link http://browserstack.com\r\n     * @link http://stackoverflow.com/questions/4565112/javascript-how-to-find-out-if-the-user-browser-is-chrome\r\n     */\r\n    if ( browser.chrome ) {\r\n\r\n        browser.chrome = ( function () {\r\n\r\n            // get a version from the user-agent first, since some versions, don't have differentiating features.\r\n\r\n            verOffset = ua.indexOf( 'chrome/' );\r\n\r\n            if ( verOffset !== -1 ) {\r\n\r\n                ver = getVer(ua.substring(verOffset+7));\r\n\r\n            }\r\n\r\n            // Feature-test Chrome candidate, fallback to user-agent if fails\r\n\r\n            try {\r\n\r\n                if ( ! 'onhashchange' in win ) {\r\n\r\n                    return 4;\r\n\r\n                } else if ( win.EventSource === undefined ) { //server-sent events undefined\r\n\r\n                    return 5;\r\n\r\n                } else if ( ! win.ArrayBuffer ) { //typed arrays undefined\r\n\r\n                    return 6;\r\n\r\n                } else if ( win.URL && ! win.URL.createObjectURL ) { // .createObjectURL undefined\r\n\r\n                    return 7;\r\n\r\n                } else if ( ! win.matchMedia ) { // .matchMedia undefined\r\n\r\n                    return 8;\r\n\r\n                } else if ( ! win.webkitRequestAnimationFrame ) { // .requestAnimationFrame undefined\r\n\r\n                    return 9; //Note: This version CRASHES trying to get WebGL context!\r\n\r\n                } else if ( ! win.crypto ) { // crypto undefined\r\n\r\n                    return 10;\r\n\r\n                } else if ( ver === 11 ) { // no reliable features!\r\n\r\n                    return 11;\r\n\r\n                } else if ( ! navigator.registerProtocolHandler ) { // CustomEvent enabled in Chrome 9-12\r\n\r\n                    return 12;\r\n\r\n                } else if ( typeof document['hidden'] === undefined ) { // Page visibility enabled in 14\r\n\r\n                    return 13;\r\n\r\n                } else if( ! document.documentElement.scrollIntoViewIfNeeded ) { //scrollIntoView enabled in 15\r\n\r\n                    return 14;\r\n\r\n                } else if ( document.documentElement.webkitRequestFullScreen && ! win.CustomEvent ) { //CustomEvent re-enabled in 15\r\n\r\n                    return 15;\r\n\r\n                } else if ( ver === 16 ) { // no reliable features!\r\n\r\n                    return 16;\r\n\r\n                } else if ( ! win.MutationObserver ) { // MutationObserver undefined\r\n\r\n                    return 17;\r\n\r\n                } else if ( ! ( win.performance && win.performance.now ) ) { // no undefined test, MutationObserver enabled\r\n\r\n                    return 18; // First version with valid WebGL\r\n\r\n                } else if ( ! ver === 19 ) { // no reliable features!\r\n\r\n                    return 19;\r\n\r\n                } else if ( ! navigator.getGamepads ) { // no gamePads, High-Resolution time API enabled\r\n\r\n                    return 20;\r\n\r\n                } else if ( ! document.documentElement.requestPointerLock ) { // no pointerLock, GamePad API enabled\r\n\r\n                    return 21;\r\n\r\n                } else if ( ! win.MediaSource ) {\r\n\r\n                    return 22;\r\n\r\n                } else if (!win.Intl) { // Internationalization undefined\r\n\r\n                    return 23;\r\n\r\n                } else if (!document.documentElement.createShadowRoot) { //shadow DOM undefined\r\n\r\n                    return 24;\r\n\r\n                } else if ( ver === 25 ) { // no reliable features!\r\n\r\n                    return 25;\r\n\r\n                } else if ( ver === 26 ) { // no reliable features!\r\n\r\n                    return 26;\r\n\r\n                } else if ( ! CSS.supports ) {\r\n\r\n                    return 27; // After this, easy to get version via css.supports() sniffing\r\n\r\n                }\r\n\r\n            } catch ( e ) {\r\n\r\n                ;\r\n\r\n            }\r\n\r\n            // If we didn't feature detect, return guess based on user-agent\r\n\r\n            if ( ver ) {\r\n\r\n                return ver;\r\n\r\n            }\r\n\r\n            return false; // not Chrome\r\n\r\n        })();\r\n    }\r\n\r\n  // TODO: Research chrome mobile\r\n\r\n  /* \r\n   * Test for Opera versions (webkit) that work with WebGL\r\n   */\r\n  if (browser.opera) {\r\n    browser.opera = (function() {\r\n    // Detect version in old and new versions.\r\n    verOffset = ua.indexOf('opr/');\r\n    if (verOffset !== -1) {\r\n      ver = getVer(ua.substring(verOffset+4));\r\n    } else {\r\n      if (win.opera && win.opera.version) { // ask old Opera its version\r\n        return parseInt(win.opera.version());\r\n      }\r\n      verOffset = ua.indexOf('opera/'); // fallback to ua-sniffing\r\n      if(verOffset !== -1) {\r\n        ver = getVer(ua.substring(verOffset+6));\r\n      }\r\n    }\r\n    // Feature-test Opera candidate, fallback to user-agent if fails.\r\n    try {\r\n      if (!win.JSON) {\r\n          return 10;\r\n      } else if (!win.ArrayBuffer) { //typed arrays undefined\r\n          return 11;\r\n      } else if (!win.MutationObserver || (win.CSS && !win.CSS.supports)) { //MutationObserver undefined\r\n          return 12;\r\n      } else if (!navigator.geolocation) { // Enabled in 11-12, disabled 15, re-enabled 16\r\n          return 15;\r\n      } else if (!win.navigator.vibrate) {\r\n          return 16;\r\n      } else if (!win.webkitRTCPeerConnection) {\r\n          return 17;\r\n      } else if (!win.CustomEvent && !win.Promise) {\r\n        return 18;\r\n      } else if (!win.CustomEvent) {\r\n        return 19;\r\n      } else if (!document.documentElement.matches) {\r\n        return 20; // webkitmatches only\r\n      } else if (ver === 21) {\r\n        return 21;\r\n      } else if (ver === 22) {\r\n        return 22;\r\n      } else if (!navigator.getGamepads) {\r\n        return 23;\r\n      }\r\n    } catch (e) {\r\n      ;\r\n    }\r\n\r\n    // Fallthrough if not feature-detected.\r\n    if (ver !== -1) {\r\n      return ver;\r\n    }\r\n    return false;\r\n    })();\r\n  }\r\n\r\n  /* \r\n   * Test for Apple Safari, esp. mobile iOS versions. \r\n   * VASTLY more accurate than trying to sniff webkit version \r\n   * in the user-agent.\r\n   */\r\n  if (browser.safari) {\r\n    browser.safari = (function () {\r\n    verOffset = ua.indexOf('safari/');\r\n    // Feature-test Safari candidate, fallback to user-agent if fails.\r\n    try {\r\n      if (!document.documentElement.insertAdjacentHTML) {\r\n          return 3.1;\r\n        } else if (!navigator.geolocation) {\r\n          return 4;\r\n        } else if (!window.matchMedia) {\r\n          return 5;\r\n        } else if (!win.MutationObserver) {\r\n          return 5.1;\r\n        } else if (!document['hidden']) {\r\n          return 6;\r\n        } else if (!win.SpeechSynthesisUtterance) {\r\n          return 6.1;\r\n        } else if (!win.crypto) {\r\n          return 7;\r\n        } else if (!win.performance.timing) {\r\n          return 7.1;\r\n        } else if (!document.documentElement.closest) {\r\n          return 8;\r\n        } else if (!window.CSS.supports('--all', 'unset')) { // css.supports() tests possible\r\n          return 9;\r\n        } else if (!document.documentElement.createShadowRoot) {\r\n          return 9.1\r\n        }\r\n      } catch (e) {\r\n        ;\r\n      }\r\n      if (verOffset !== -1) {\r\n        return getVer(ua.substring(verOffset+7));\r\n      }\r\n      return false;\r\n    })();\r\n  }\r\n\r\n  /* \r\n   * Mobile Safari has a different featureset\r\n   */\r\n  if (browser.safari && platform.iOS) {\r\n    browser.mobileSafari = (function () {\r\n      verOffset = ua.indexOf('safari/');\r\n      try {\r\n        if (!win.JSON) {\r\n          return 3.2;\r\n        } else if (!win.ArrayBuffer) {\r\n          return 4.1;\r\n        } else if (!win.matchMedia) {\r\n          return 4.3;\r\n        } else if (!win.FileReader) {\r\n          return 5.1;\r\n        } else if(!win.crypto) {\r\n          return 6.1;\r\n        }\r\n      } catch (e) {\r\n        ;\r\n      }\r\n      if (verOffset !== -1) {\r\n        return getVer(ua.substring(verOffset+7));\r\n      }\r\n      return false;\r\n    })();\r\n  }\r\n\r\n  /* \r\n   * Used to resize canvas.\r\n   */\r\n  tests['getComputedStyle'] = function () {\r\n    return !!window.getComputedStyle;\r\n  };\r\n\r\n  /*\r\n   * Test for document.createElement presence,\r\n   * missing in IE < 7, FF < 2.\r\n   */\r\n  tests['createElement'] = function () {\r\n    return !!document.createElement;\r\n  };\r\n\r\n  /*\r\n   * Test for basic HTML5 tag support.\r\n   * Adapted from HTML5Shiv\r\n   * @link https://github.com/aFarkas/html5shiv/blob/master/dist/html5shiv.js\r\n   */\r\n  tests['html5'] = function () {\r\n    if(tests['createElement']()) {\r\n      var a = document.createElement('a');\r\n      a.innerHTML = '<xyz></xyz>';\r\n      //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles\r\n      var res = ('hidden' in a);\r\n      a = a.innerHTML = null;\r\n      return res;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /*\r\n   * Test for HTML5 canvas.\r\n   * Note: No compatible polyfill (Flash-based ones won't work for WebVR).\r\n   */\r\n  tests['canvas'] = function () {\r\n    return canvas;\r\n    //return !!win.CanvasRenderingContext2D;\r\n  };\r\n\r\n  /*\r\n   * Test for WebGL support in browsers supporting HTML5 canvas.\r\n   * IE 9, 10 Polyfill available (non-Flash).\r\n   * @link https://github.com/iewebgl/iewebgl\r\n   */\r\n  tests['webGL'] = function () {\r\n    if (canvas && document.createElement) {\r\n\r\n      if (!win.WebGLRenderingContext) {\r\n        return false;\r\n      }\r\n      var verOffset = ua.indexOf('chrome');\r\n      //Flag for Google Chrome 9, which crashes if you try to access a 3d context.\r\n      if (browser.chrome && getVer(ua.substring(verOffset+7)) < 18) {\r\n        return false;\r\n      }\r\n      cs = document.createElement('canvas');\r\n      for (i in names) {\r\n        try {\r\n          ctx = cs.getContext(names[i]);\r\n          if (ctx && typeof ctx.getParameter == 'function') {\r\n            glType = names[i];\r\n            glVers = ctx.getParameter(ctx.VERSION).toLowerCase();\r\n            cs = ctx = null;\r\n            return true;\r\n          }\r\n        } catch (e) {}\r\n      }\r\n    }\r\n    cs = ctx = null;\r\n    return false;\r\n  };\r\n\r\n  /* \r\n   * Return type of WebGL context (e.g. 'experimental') from WebGL detect.\r\n   */\r\n  tests['glType'] = function () {\r\n    return glType;\r\n  };\r\n\r\n  /* \r\n   * Return version of WebGL context from WebGL detect.\r\n   */\r\n  tests['glVersion'] = function () {\r\n    return glVers;\r\n  };\r\n\r\n  /*\r\n   * Detect Promise object support, missing in\r\n   * all IE, Chrome < 33, FF < 29, Safari < 7.1,\r\n   * iOS < 8, Android < 4.4.4.\r\n   */\r\n  tests['promise'] = function () {\r\n    return ('Promise' in win);\r\n  };\r\n\r\n  /*\r\n   * Detect support for WebWorkers, used in many 3D libraries, missing in\r\n   * IE < 11, FF < 3.5, Safari < 4, iOS < 5.1, Android < 4.4.\r\n   */\r\n  tests['webworkers'] = function () {\r\n    return !!win.Worker;\r\n  };\r\n\r\n  /*\r\n   * Detect FileAPI support, may be usefulf or object\r\n   * management in VR spaces, missing in\r\n   * IE < 10, Chrome < 38, FF < 28, Safari < 5.1, iOS < 6,\r\n   * Android < 3\r\n   */\r\n  tests['fileapi'] = function () {\r\n    return !!(win.File && win.FileReader && win.FileList && win.Blob);\r\n  };\r\n\r\n  /*\r\n  * Detect localStorage support, may be useful for object\r\n  * management in VR spaces, not supported in\r\n  * IE < 8, FF < 3.5, Safari < 4.\r\n  */\r\n  tests['localStorage'] = function () {\r\n    var mod = 'test';\r\n      try {\r\n           localStorage.setItem(mod, mod);\r\n           localStorage.removeItem(mod);\r\n           return true;\r\n       } catch(e) {\r\n           return false;\r\n       }\r\n   };\r\n\r\n   /*\r\n    * Detect fetch (alternative to XHR) API support, better for\r\n    * dynamic object requests than Ajax, missing in\r\n    * All IE, Edge < 14, Chrome < 42, FF < 39, All Safari,\r\n    * Android < 5.6.\r\n    */\r\n  tests['fetch'] = function () {\r\n    return ('fetch' in win);\r\n  };\r\n\r\n  /*\r\n   * Detect support for .querySelectorAll, missing in\r\n   * IE < 9, FF < 3.5\r\n   */\r\n  tests['querySelectorAll'] = function () {\r\n    return !!document.querySelectorAll;\r\n  };\r\n\r\n  /*\r\n   * Detect support for addEventListener, missing in\r\n   * IE < 9.\r\n   */\r\n  tests['addEventListener'] = function () {\r\n    return ('addEventListener' in win);\r\n  };\r\n\r\n  /*\r\n   * Detect support for CustomEvents, missing in\r\n   * IE 9, 10, 11, Android < 4.4\r\n   */\r\n  tests['CustomEvent'] = function () {\r\n    try {\r\n      new CustomEvent('test');\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /*\r\n   * Environment Feature detection.\r\n   * \r\n   * The goal is to determine whether we can run WebVR (native or polyfill), \r\n   * along with the associated libraries, loading polyfills if necessary.\r\n   *\r\n   * Our feature detectors are wrapped in named functions so they\r\n   * can be re-tested after loading polyfills.\r\n   *\r\n   * Client vendor prefixes.\r\n   * @link https://davidwalsh.name/vendor-prefix\r\n   */\r\n  tests['vendorPrefix'] = function () {\r\n    // Get the vendor prefix for the client.\r\n    if (!win.getComputedStyle) {\r\n      return {\r\n        js: '',\r\n        css: ''\r\n      };\r\n    } else {\r\n    var styles = win.getComputedStyle(document.documentElement, ''),\r\n    pre = (Array.prototype.slice\r\n        .call(styles)\r\n        .join('')\r\n        .match(/-(moz|webkit|ms|o|xv)-/) || ['',''])[1]; // Default to nothing.\r\n      return {\r\n          js: pre,\r\n          css: '-' + pre + '-'\r\n        };\r\n    }\r\n  };\r\n\r\n\r\n  /* \r\n   * Detect support for CSS PointerEvents, useful \r\n   * for ui \r\n   */\r\n  tests['CSSPointerEvent'] = function () {\r\n    if (document.createElement) {\r\n      var elem = document.createElement('x');\r\n      elem.style.cssText = 'pointer-events:auto';\r\n      var r = elem.style.pointerEvents === 'auto';\r\n      elem = null;\r\n      return r;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /*\r\n   * Detect support for a specific event type.\r\n   * @link http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\r\n   */\r\n  var eventSupport_ = function(elem, eventName) {\r\n    eventName = 'on' + eventName;\r\n    var isSupported = (eventName in elem);\r\n    if (!isSupported && 'setAttribute' in elem) {\r\n      elem.setAttribute(eventName, 'return;');\r\n      isSupported = typeof elem[eventName] == 'function';\r\n      elem.removeAttribute(eventName);\r\n    }\r\n    return isSupported;\r\n  };\r\n\r\n  /*\r\n   * Support for ES5 properties, missing in\r\n   * IE < 9, Chrome < 23, FF < 21, Safari < 6,\r\n   * Android < 4.4\r\n   */\r\n  tests['defineProperty'] = function () {\r\n    return ('defineProperty' in Object);\r\n  };\r\n\r\n  tests['defineProperties'] = function () {\r\n    return ('defineProperties' in Object);\r\n  };\r\n\r\n  /*\r\n   * Detect typed arrays (needed for WebGL), missing in\r\n   * IE < 11, Chrome < 7, FF < 4, Safari < 6,\r\n   * Android < 4.\r\n   */\r\n  tests['typedArray'] = function () {\r\n    return ('ArrayBuffer' in win);\r\n  };\r\n\r\n  /*\r\n   * Detect support for W3C Fullscreen API. No browser completely\r\n   * and consistently supports the W3C standard. Partial support\r\n   * in IE Edge, Chrome > 14, FF > 9, Safari > 5. NO SUPPORT in\r\n   * Android and iOS Safari browser.\r\n   *\r\n   */\r\n  tests['fullScreen'] = function () {\r\n    return !!(document.documentElement.requestFullscreen);\r\n  };\r\n\r\n  /*\r\n   * Detect touch support.\r\n   * useful for changing the Ui if touch is used, missing in\r\n   * IE, Edge, Chrome < 22, FF, Safari. Full support in iOS\r\n   * Safari and Android.\r\n   */\r\n  tests['touch'] = function () {\r\n    return !!(('ontouchstart' in win) || (win.DocumentTouch && document instanceof DocumentTouch));\r\n  };\r\n\r\n    /* \r\n     * detect webWorkers\r\n     */\r\n    tests['webWorkers'] = function () {\r\n        return !!window.Worker;\r\n    };\r\n\r\n  /*\r\n   * Detect native support for requestAnimationFrame, missing in\r\n   * IE < 11, Chrome < 10, FF < 4, Safari < 6, Android < 4.4\r\n   */\r\n  tests['requestAnimationFrame'] = function () {\r\n    return ('requestAnimationFrame' in win);\r\n  };\r\n\r\n  /*\r\n   * Gamepad API, used by haptic controllers.\r\n   * No IE Support, Chrome < 21, FF < 29, no iOS or\r\n   * Android support. Wii has its own non-W3C version,\r\n   * win.wiiu.gamepad\r\n   */\r\n  tests['gamepad'] = function () {\r\n    return !!navigator.getGamepads;\r\n  };\r\n\r\n  /*\r\n   * Test for WebVR API.\r\n   * @link https://iswebvrready.org/\r\n   */\r\n  tests['webvr'] = function () {\r\n    if ('getVRDisplays' in navigator) {\r\n      ;\r\n      return true;\r\n    } else if ('getVRDevices' in navigator || 'mozGetVRDevices' in navigator) {\r\n      ;\r\n      return false;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  /* \r\n   * Test if the device is mobile\r\n   */\r\n  tests['mobile'] = function () {\r\n    return (platform.mobile || platform.tablet);\r\n  };\r\n\r\n  /* \r\n   * Browser types and versions\r\n   */\r\n  tests['browser'] = function () {\r\n    return browser;\r\n  };\r\n\r\n  /* \r\n   * Operating system.\r\n   */\r\n  tests['os'] = function () {\r\n    return os;\r\n  };\r\n\r\n  /* \r\n   * Hardware form-factor (e.g. mobile vs TV)\r\n   */\r\n  tests['platform'] = function () {\r\n    return platform;\r\n  }\r\n\r\n  /* \r\n   * Hardware detects.\r\n   */\r\n  tests['screen'] = function () {\r\n    var s = {\r\n      touch: !!(('ontouchstart' in win) || win.DocumentTouch && document instanceof DocumentTouch),\r\n      width: (Math.max(win.screen.width, win.screen.height)  || 0),\r\n      height: (Math.min(win.screen.width, win.screen.height) || 0),\r\n      pixelRatio: win.devicePixelRatio\r\n    };\r\n    // Define display pixels and retina.\r\n    s.pixelWidth = parseInt(s.width * s.pixelRatio);\r\n    s.pixelHeight = parseInt(s.height * s.pixelRatio);\r\n    s.retina = (s.pixelRatio > 1);\r\n    s.longest = Math.max(s.width, s.height);\r\n    return s;\r\n  };\r\n\r\n  /*\r\n   * Microloader. Store polyfills to load. Deliberately old-school for maximum browser support.\r\n   * @link https://css-tricks.com/snippets/javascript/async-script-loader-with-callback/\r\n   * @link https://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/\r\n  */\r\n  function load (batches, callback, progressFn, failFn) {\r\n    var head = document.getElementsByTagName('head')[0] || document.documentElement,\r\n    batchLength = 0,\r\n    batchCount = 0,\r\n    scriptLength = 0,\r\n    scriptCount = 0,\r\n    gScriptCount = 0,\r\n    scriptsToLoad = 0;\r\n\r\n    var err_ = function (s, msg) {\r\n      ;\r\n      ;\r\n      if (s && s.nodeType) {\r\n        try {\r\n          head.removeChild(s);\r\n        } catch (e) {};\r\n      }\r\n      if(failFn) {\r\n        failFn('error at script #:', batchCount, scriptCount, s);\r\n        s = null;\r\n      }\r\n    };\r\n\r\n    var clear_ = function (s) {\r\n      //clear the event and prevent memory leaks\r\n      \r\n      // Progress report.\r\n\r\n      if (s) {\r\n        gScriptCount++;\r\n        progressFn( parseInt( 100 * gScriptCount / scriptsToLoad ), s.name );\r\n        \r\n        //try {\r\n        //  head.removeChild(s);\r\n        //} catch (e) {};\r\n\r\n        s.onreadystatechange = s.onload = null;\r\n        s = null;\r\n      }\r\n      // Increment script and possibly batch.\r\n      scriptCount++;\r\n      if (scriptCount >= scriptLength) {\r\n        scriptCount = 0; batchCount++;\r\n        if (batchCount < batchLength) {\r\n          runScriptBatch(batches[batchCount])\r\n        } else {\r\n          \r\n          callback();\r\n        }\r\n      }\r\n    };\r\n\r\n    function runScriptBatch (batchScript) {\r\n      \r\n      for (var i = 0; i < batchScript.length; i++) {\r\n        scriptLength = batchScript.length; //NOTE: if done outside for (), incorrect value in old IE.\r\n        var scr = batchScript[i];\r\n        if (!scr) {\r\n          clear_(); //empty script\r\n          break;\r\n        }\r\n        // If we don't need the polyfill, don't load it\r\n        if (scr.poly === true && self.results[scr.name] === true) {\r\n          ;\r\n          clear_();\r\n        } else {\r\n          \r\n          //scr.script = document.createElement('script');\r\n          var s = document.createElement('script'); //scr.script;\r\n          s.type = 'text\\/javascript';\r\n          s.charset = 'utf8';\r\n          s.async = true;\r\n          s.src = scr.path;\r\n          s.name = scr.name; // KLUDGE, saving into script\r\n          // Old IE version.\r\n          if (s.onreadystatechange !== undefined) {\r\n            s.onreadystatechange = function () {\r\n              \r\n              \r\n              if (/loaded|complete/.test(this.readyState)) {\r\n                  ;\r\n                  //head.insertBefore(s, head.firstChild);\r\n                  this.onreadystatechange = null;\r\n                  \r\n                  clear_(this);\r\n\r\n                // IE hack to stop loading\r\n                var firstState = this.readyState;\r\n                this.children;\r\n                if (firstState == 'loaded' && this.readyState == 'loading') {\r\n                  err_(this, 'error in readyState load for:' + e.srcElement.baseURI);\r\n                  this.onreadystatechange = null;\r\n                  clear_(this);\r\n                  return;\r\n                }\r\n              } //loaded or complete\r\n            }\r\n          } else if (s.onload !== undefined) {\r\n            s.onload = function (e) {\r\n              ;\r\n              \r\n              clear_(this);\r\n              return;\r\n            }\r\n            s.onerror = function (e) {\r\n              err_(e.target, 'error in onload for:' + e.target);\r\n            }\r\n          } else {\r\n            err_(s,'script loading not supported for:' + scr.path, ' type:' + typeof s + ' nodeType:' + typeof s.nodeType);\r\n          }\r\n\r\n          head.insertBefore(s, head.firstChild);\r\n        } //end of batch[i].name test\r\n      } // end of for () loop\r\n      //We only go here if there's an empty batch!\r\n      if(batchScript.length == 0) {\r\n        failFn('Loader: empty batch [] at index:', batchCount, 0, 0, 'undefined');\r\n      }\r\n    }; // end of function\r\n\r\n    // Main program. Count scripts to load.\r\n    ;\r\n\r\n    // Scripts is an array of arrays\r\n    for (var i = 0, len = batches.length; i < len; i++) {\r\n      for (var j = 0, len2 = batches[i].length; j < len2; j++) {\r\n        var scr = batches[i][j];\r\n        if (!scr) {\r\n          failFn('Loader: missing object (probably trailing comma) for batch index:', i, j, scr);\r\n          //return false;\r\n        } else {\r\n\r\n        // Make sure the necessary data is present.\r\n        if (!scr.name || !scr.path || scr.poly === undefined) {\r\n            if (scr.name) {\r\n              scr = scr.name;\r\n            }\r\n            failFn('Loader: incorrect batch syntax for batch index:', i, j, scr);\r\n            return false;\r\n          }\r\n        if (scr.poly === true) {\r\n          if (!self.results[scr.name]) {\r\n            scriptsToLoad++;\r\n          }\r\n        } else {\r\n          scriptsToLoad++;\r\n        }\r\n      }\r\n      }\r\n    }\r\n\r\n    // Set starting length of batches.\r\n    batchLength = batches.length;\r\n    // Load scripts\r\n    runScriptBatch(batches[batchCount]);\r\n  }; // End of microloader.\r\n\r\n  // Redetect after loading complete\r\n  function reDetect () {\r\n    for (var i in retests) {\r\n      ;\r\n      if (self.results[i] === undefined) {\r\n        ;\r\n      } else if (!self.results[i]) {\r\n        ;\r\n        self.results[i] = tests[i]();\r\n        if (self.results[i]) {\r\n          ;\r\n        } else {\r\n          ;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Detect features. Export so we can re-detect after polyfills are loaded.\r\n  // tests used by other tests can be pre-computed.\r\n  function detect() {\r\n    self.results = {\r\n      deviceorientation: eventSupport_(win, 'deviceorientation'),\r\n      devicemotion: eventSupport_(win, 'devicemotion'),\r\n      load: load,\r\n      detect: detect,\r\n      reDetect: reDetect\r\n    };\r\n    for (var i in tests) {\r\n      if (typeof(tests[i]) === 'function') { // this allows us to pre-compute some results.\r\n        //alert(\"test:\" + i)\r\n        self.results[i] = tests[i]();\r\n        //alert(\"test result:\" + self.results[i])\r\n      } else {\r\n        //alert(\"prebuilt result:\" + tests[i])\r\n        self.results[i] = tests[i];\r\n      }\r\n    };\r\n    return self.results;\r\n  }\r\n\r\n  // Fire first detection and report results.\r\n  win.WebVRFeatureDetector = detect();\r\n\r\n})(window);\r\n"]}